# ðŸš€ Projeto Spring Boot com Docker e PostgreSQL

Este projeto Ã© uma aplicaÃ§Ã£o web desenvolvida com Java 17, Spring Boot e Maven, utilizando Docker para facilitar o ambiente de desenvolvimento e PostgreSQL como banco de dados.

---

## ðŸ“‹ PrÃ©-requisitos

Antes de iniciar, Ã© necessÃ¡rio ter instalado:

- âœ… Java 17+
- âœ… Maven 3.8+
- âœ… Postgres

---
### ðŸ“‹ Fique Atento!

Antes de executar os comandos, altere os dados do seu banco de dados no applicantion.properties:

src/main/resources/application.properties

---

## âœ… Resultado

<<<<<<< HEAD
# Banco de dados

POSTGRES_DB=cupincha_db

POSTGRES_USER=SeuUsuario

POSTGRES_PASSWORD=SuaSenha

# Spring Boot datasource
SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/cupincha_db
=======
# Spring Boot datasource
spring.datasource.url=jdbc:postgresql://localhost:5432/cupincha_db
>>>>>>> c8b8b4342ac7d6f7a7b741d46938902ef0a0a3bd

SPRING_DATASOURCE_USERNAME=SeuUsuario

SPRING_DATASOURCE_PASSWORD=SuaSenha

---




## ðŸ“¦ Passo a passo para rodar o projeto

### 1. Criar banco de dados (cupincha_db)

## Execute este script

```bash
-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.afiliado
(
    id uuid NOT NULL,
    cnpj character varying(20) COLLATE pg_catalog."default",
    created_at timestamp(6) without time zone,
    nome character varying(100) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT afiliado_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.categoria
(
    id uuid NOT NULL,
    created_at timestamp(6) without time zone,
    descricao character varying(100) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT categoria_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.cupom
(
    id uuid NOT NULL,
    ativo integer,
    codigo character varying(50) COLLATE pg_catalog."default" NOT NULL,
    desconto numeric(10, 2),
    restricoes character varying(255) COLLATE pg_catalog."default",
    validade timestamp(6) without time zone NOT NULL,
    afiliado_id uuid,
    categoria_id uuid,
    loja_id uuid,
    CONSTRAINT cupom_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.loja
(
    id uuid NOT NULL,
    created_at timestamp(6) without time zone,
    nome character varying(100) COLLATE pg_catalog."default" NOT NULL,
    url character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT loja_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.loja_afiliado
(
    afiliado_id uuid NOT NULL,
    loja_id uuid NOT NULL,
    CONSTRAINT loja_afiliado_pkey PRIMARY KEY (afiliado_id, loja_id)
);

CREATE TABLE IF NOT EXISTS public.loja_categoria
(
    categoria_id uuid NOT NULL,
    loja_id uuid NOT NULL,
    CONSTRAINT loja_categoria_pkey PRIMARY KEY (categoria_id, loja_id)
);

CREATE TABLE IF NOT EXISTS public.users
(
    id uuid NOT NULL,
    username character varying(255) COLLATE pg_catalog."default",
    password character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT pk_user PRIMARY KEY (id)
);

ALTER TABLE IF EXISTS public.cupom
    ADD CONSTRAINT fkfwe6ratt64jqppog2eq09jsom FOREIGN KEY (categoria_id)
    REFERENCES public.categoria (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.cupom
    ADD CONSTRAINT fkjm204h723rd36i5fy7nh81yi4 FOREIGN KEY (loja_id)
    REFERENCES public.loja (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.cupom
    ADD CONSTRAINT fktmnuggmriqyp195n9tk6smukn FOREIGN KEY (afiliado_id)
    REFERENCES public.afiliado (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.loja_afiliado
    ADD CONSTRAINT fk9cg73vnjqxehlu76ykd19d1bj FOREIGN KEY (loja_id)
    REFERENCES public.loja (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.loja_afiliado
    ADD CONSTRAINT fkoytfngj35w8nr915vlbesngnr FOREIGN KEY (afiliado_id)
    REFERENCES public.afiliado (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.loja_categoria
    ADD CONSTRAINT fkgih20vrswyf9403ohl702b5df FOREIGN KEY (categoria_id)
    REFERENCES public.categoria (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.loja_categoria
    ADD CONSTRAINT fkimftu4t7snv11ehtfgvadlul9 FOREIGN KEY (loja_id)
    REFERENCES public.loja (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;
```

### 2. Popular o banco de dados:

```bash
INSERT INTO public.users (id, username, password) VALUES
('ab7d917b-d1df-4a75-8fed-0814fe195b4f', 'admin', 'admin123'),
('a83f3e1e-8e8e-437e-8af8-ed605179078f', 'usuario1', 'senhaSegura'),
('a3e856b7-6f91-4f82-b12f-6e053a8bfffc', 'fernando', 'senha123');

INSERT INTO public.afiliado (id, cnpj, created_at, nome) VALUES
('145a1add-a9fc-4972-81a7-48ca2de52888', '12.345.678/0001-90', now(), 'Afiliado XPTO'),
('190efbd2-7f42-463c-889c-acf58b54a948', '98.765.432/0001-10', now(), 'Afiliado Mega');

INSERT INTO public.categoria (id, created_at, descricao) VALUES
('dc6b7e95-4286-4d34-a1d0-f596d473258d', now(), 'Tecnologia'),
('10fb1c2b-cdee-4621-99b2-26c79be7e375', now(), 'Moda'),
('16ef0b37-3bf0-4863-9066-7ba950b6ae6b', now(), 'Beleza');

INSERT INTO public.loja (id, created_at, nome, url) VALUES
('6734c8fd-50f7-4987-965f-c3e934763613', now(), 'Loja Tech', 'https://lojatech.com'),
('81199f20-911b-44fc-9e0c-6be07c9ad9b4', now(), 'Fashion Store', 'https://fashion.com'),
('612f4b5c-ed00-4ec1-a78e-599d19c78e98', now(), 'Beleza Pura', 'https://beleza.com');

INSERT INTO public.loja_afiliado (afiliado_id, loja_id) VALUES
('145a1add-a9fc-4972-81a7-48ca2de52888', '6734c8fd-50f7-4987-965f-c3e934763613'),
('190efbd2-7f42-463c-889c-acf58b54a948', '81199f20-911b-44fc-9e0c-6be07c9ad9b4');

INSERT INTO public.loja_categoria (categoria_id, loja_id) VALUES
('dc6b7e95-4286-4d34-a1d0-f596d473258d', '6734c8fd-50f7-4987-965f-c3e934763613'),
('10fb1c2b-cdee-4621-99b2-26c79be7e375', '81199f20-911b-44fc-9e0c-6be07c9ad9b4'),
('16ef0b37-3bf0-4863-9066-7ba950b6ae6b', '612f4b5c-ed00-4ec1-a78e-599d19c78e98');

INSERT INTO public.cupom (id, ativo, codigo, desconto, restricoes, validade, afiliado_id, categoria_id, loja_id) VALUES
('07cb3984-38f2-4d5e-af66-c2f836bef4f4', 1, 'DESCONTO10', 10.00, 'Somente para primeira compra', '2025-08-04 14:11:08', '145a1add-a9fc-4972-81a7-48ca2de52888', 'dc6b7e95-4286-4d34-a1d0-f596d473258d', '6734c8fd-50f7-4987-965f-c3e934763613'),
('a80620d7-9fc5-43a3-afe4-44d93784a712', 1, 'MODA20', 20.00, 'VÃ¡lido para produtos selecionados', '2025-07-20 14:11:08', '190efbd2-7f42-463c-889c-acf58b54a948', '10fb1c2b-cdee-4621-99b2-26c79be7e375', '81199f20-911b-44fc-9e0c-6be07c9ad9b4');
```

### 2. Copilar o projeto:

```bash
mvn clean package -DskipTests

mvn clean install
```

### 2. Executar o projeto

## Seu projeto esta pronto para ser executado

Procure pelo arquivo:

src/main/java/org/cupinchacupons/FrontEndApplication.java

### 4. Acessar a aplicaÃ§Ã£o no navegador
```bash
http://localhost:8080/login/
Usuario:admin
Senha:admin123

```


